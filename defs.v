
//----------------------------------------------------------------
// ALU Instruction
//----------------------------------------------------------------

// ISC Defined
`define ADD 8'b00000001
`define SUB 8'b00000010
`define MUL 8'b00000011
`define DIV 8'b00000100
`define AND 8'b00000101
`define OR 8'b00000110
`define NOT 8'b00000111
`define RSHIFT 8'b00001000
`define LSHIFT 8'b00001001
`define MOVE 8'b00001010
`define MOVEOUT 8'b00001011
`define MOVEIN 8'b00001100
`define JUMP 8'b00001101
`define EJUMP 8'b00001110
`define NEJUMP 8'b00001111
`define MTHAN 8'b00010000
`define WAIT 8'b00010001
`define INTER 8'b00010010

// ENTRY Defined: NPU ALU
`define C1 8'b10000000
`define S2 8'b10000001
`define C3 8'b10000010
`define S4 8'b10000011
`define C5 8'b10000100
`define LRMOVE 8'b10000101

//----------------------------------------------------------------
// IMM Instruction
//----------------------------------------------------------------

`define IMM_YES 1'b1
`define IMM_NO 1'b0

//----------------------------------------------------------------
// MEM Instruction
//----------------------------------------------------------------

`define MEM_R 1'b0
`define MEM_W 1'b1

//----------------------------------------------------------------
// REG Instruction
//----------------------------------------------------------------

`define REG_R 2'b01
`define REG_W 2'b10
`define REG_RW 2'b11

//----------------------------------------------------------------
// PC Instruction
//----------------------------------------------------------------

`define PC_WAIT 2'b00
`define PC_JUMP 2'b01
`define PC_INC 2'b10
`define PC_WAIT_HIGH 2'b11

//----------------------------------------------------------------
// Register Address
//----------------------------------------------------------------

`define REG_MTHAN 5'd31
`define REG_JUMP_H 5'd30
`define REG_JUMP_L 5'd29
`define REG_MOVEIN 5'd28
`define REG_INTER 5'd27
`define REG_CARRY 5'd26
`define REG_NEG 5'd25
`define REG_MD_H 5'd24
`define REG_MD_L 5'd23
`define REG_0 5'd0

//----------------------------------------------------------------
// RESET Instruction
//----------------------------------------------------------------

`define RESET 1'b1

//----------------------------------------------------------------
// Machine Instruction
//----------------------------------------------------------------

`define IMM_INST_sel 1'b0
`define ROM_INST_sel 1'b1
`define EN_W 1'b1

// NPU ALU selector
`define Sel_NPU_ALU 1'b1

//----------------------------------------------------------------
// Max Address
//----------------------------------------------------------------

`define MAX_RAM_ADDR 10000 // Max: 65535
`define MAX_ROM_ADDR 10000 // Max: 65535

//----------------------------------------------------------------
// FULL Instruction
//----------------------------------------------------------------

`define I_WAIT 32'b00010001010000000000000000000000
`define I_WAIT_STAY 32'b00010001000000000000000000000000

//----------------------------------------------------------------
// Registers Data
//----------------------------------------------------------------

`define EMPTY 8'b00000000
`define EN_CARRY 8'b11111111
`define DIS_CARRY 8'b00000000
`define EN_NEG 8'b11111111
`define DIS_NEG 8'b00000000
`define EN_MORE 8'b11111111
`define DIS_MORE 8'b00000000

//----------------------------------------------------------------
// LeNet Data
//----------------------------------------------------------------

// GENERAL
`define CHANNEL1 1
`define CHANNEL2 1

`define BITWIDTH_8 8
`define BITWIDTH_16 16
`define BITWIDTH_32 32
`define BITWIDTH_64 64

`define DATAWIDTH_C1 32
`define DATAHEIGHT_C1 32

`define DATAWIDTH_S2 28
`define DATAHEIGHT_S2 28

`define DATAWIDTH_C3 14
`define DATAHEIGHT_C3 14

`define DATAWIDTH_S4 10
`define DATAHEIGHT_S4 10

`define DATAWIDTH_C5 5
`define DATAHEIGHT_C5 5

`define LENGTH (`DATAWIDTH_C5 * `DATAHEIGHT_C5 * `CHANNEL2)
`define OUTLEN 10

`define FILTERHEIGHT 5
`define FILTERWIDTH 5

`define KWIDTH 2
`define KHEIGHT 2

`define FILTERBATCH 1
`define STRIDEHEIGHT 1
`define STRIDEWIDTH 1

`define PADDINGENABLE 0

// ADDRESS: 

// IMG
`define IMG_C1_STA 0
`define IMG_C1_END (`IMG_C1_STA + `BITWIDTH_8 * `DATAWIDTH_C1 * `DATAHEIGHT_C1 * `CHANNEL1 - 1)
`define IMG_S2_STA (`IMG_C1_END + 1)
`define IMG_S2_END (`IMG_S2_STA + `BITWIDTH_16 * `DATAWIDTH_S2 * `DATAHEIGHT_S2 * `CHANNEL2 - 1)
`define IMG_C3_STA (`IMG_S2_END + 1)
`define IMG_C3_END (`IMG_C3_STA + `BITWIDTH_16 * `DATAWIDTH_C3 * `DATAHEIGHT_C3 * `CHANNEL2 - 1)
`define IMG_S4_STA (`IMG_C3_END + 1)
`define IMG_S4_END (`IMG_S4_STA + `BITWIDTH_32 * `DATAWIDTH_S4 * `DATAHEIGHT_S4 * `CHANNEL2 - 1)
`define IMG_C5_STA (`IMG_S4_END + 1)
`define IMG_C5_END (`IMG_C5_STA + `BITWIDTH_32 * `LENGTH - 1)
`define RESULT_STA (`IMG_C5_END + 1)
`define RESULT_END (`RESULT_STA + `BITWIDTH_64 * `OUTLEN - 1)

// FLITER
`define FLITER_C1_STA (`RESULT_END + 1)
`define FLITER_C1_END (`FLITER_C1_STA + `BITWIDTH_8 * `FILTERHEIGHT * `FILTERHEIGHT - 1)
`define FLITER_C3_STA (`FLITER_C1_END + 1)
`define FLITER_C3_END (`FLITER_C3_STA + `BITWIDTH_16 * `FILTERHEIGHT * `FILTERHEIGHT - 1)
`define WEIGHT_C5_STA (`FLITER_C3_END + 1)
`define WEIGHT_C5_END (`WEIGHT_C5_STA + `BITWIDTH_32 * `LENGTH * `OUTLEN - 1)

// BIAS
`define BIAS_C1_STA (`WEIGHT_C5_END + 1)
`define BIAS_C1_END (`BIAS_C1_STA + `BITWIDTH_8 - 1)
`define BIAS_C3_STA (`BIAS_C1_END + 1)
`define BIAS_C3_END (`BIAS_C3_STA + `BITWIDTH_16)
`define BIAS_C5_STA (`BIAS_C3_END + 1)
`define BIAS_C5_END (`BIAS_C5_STA + `BITWIDTH_32 * `OUTLEN - 1)

// RAMS ADDRESS
`define IMG_C1_LINE 1
`define IMG_S2_LINE 2
`define IMG_C3_LINE 3
`define IMG_S4_LINE 4
`define IMG_C5_LINE 5
`define FLITER_C1_LINE 6
`define FLITER_C3_LINE 7
`define WEIGHT_C5_LINE 8
`define BIAS_C1_LINE 9
`define BIAS_C3_LINE 10
`define BIAS_C5_LINE 11
`define RESULT_LINE 12

// Input Data: Processed with self-defined image on python project
`define IMAGE_DATA 8192'h9A9A9A9A9A9B9C9C9D9C9C9C9D9D9D9D9C9C9A9A9B999A9C9B989897979799989B9B9C9B9A9C9C9C9C9B9B9D9D9D9D9F9D9C9C9C9C9A9A9D9B9A9999999999999D9B9C9B9C9B9D9D9C9D9D9E9D9D9E989E9E9E9E9E9B9C9C9B9A9999999A99989E9C9C9D9D9C9E9D9E9D9E9F9D9EA07593A19F9D9C9E9F9E9D9C9A9B9A9A9A999E9D9E9E9F9D9F9E9E9E9E9F9FA0A07395A3A19E9D9FA0A09E9C9C9C9B9C9B9A9E9D9E9E9F9F9F9F9E9D9E9E9F9284698486859AA1A0A0A09E9D9E9D9C9C9B9A9D9E9E9E9F9F9F9F9D9E9F9F9F978E75989C978AA2A1A0A09E9E9E9D9D9D9B9A9E9F9F9E9E9F9F9F9E9E9EA09FA19C7EA2A49385A4A2A0A09E9E9F9D9E9D9C9B9E9D9E9F9F9F9E9FA09F9F9F9F9F9D90A1977899A3A2A1A09F9E9F9C9E9D9D9B9E9E9F9F9FA0A09FA09E9DA0A1A0A0A1A28999A3A2A2A2A19F9E9E9D9E9E9D9D9FA0A0A1A09FA09F9F9E9EA1A1A0A1A2A4A6A6A3A2A2A1A19F9E9E9E9F9E9E9C9FA09FA1A1A09F9FA0A09F9FA1A1A2948688A2A6A3A3A09F9F9E9E9F9F9E9D9CA0A1A0A1A2A1A0A0A2A19F9FA0A38E77799186A3A3A1A1A09F9F9F9E9F9E9D9DA1A1A2A2A2A2A1A1A1A09FA0A0A3809986A88D97A5A2A1A0A0A09F9E9E9E9C9DA1A1A2A3A2A1A3A2A0A1A1A1A1A2948381A78B95A5A4A1A1A0A1A0A09F9E9D9CA3A2A2A29FA1A2A1A2A1A1A1A2A1A39191A7859DA4A3A2A1A1A1A0A09F9E9E9DA2A2A2A2A2A1A3A3A2A2A2A2A3A2A2A4A5A493A2A2A3A3A2A2A1A0A09F9F9E9DA1A2A3A3A3A3A3A4A3A4A4A3A3A3A4A4A4A2A4A4A3A3A3A2A1A1A1A0A09F9E9EA3A3A4A4A3A4A4A3A3A3A3A4A3A5A39EA68A87A7A5A3A3A3A2A2A1A09F9FA09EA3A3A4A4A3A4A4A4A4A3A4A4A59F8084A1A686A1A5A3A2A3A3A3A1A1A1A0A09EA3A3A3A3A3A4A4A4A2A3A4A3A59689A297AB819EA5A3A2A2A2A2A2A1A1A1A0A0A3A4A3A2A3A3A4A4A3A2A3A2A2A28FA58F8683A5A6A3A3A2A2A1A1A1A1A0A09FA3A4A3A2A2A3A4A4A4A4A3A3A2A3A5A5A19AA4A6A4A4A2A2A1A2A0A1A1A19F9FA4A4A2A2A3A3A3A4A4A4A4A5A4A098A6A6A7A5A5A3A4A4A2A1A1A1A1A19FA09EA4A3A3A5A4A4A4A3A4A3A3A5A6988BA8A7A8A6A4A2A2A2A2A2A1A1A1A0A0A09FA3A3A4A4A4A5A3A3A4A4A2A6937678828399A7A5A4A3A2A2A1A1A2A1A09F9EA0A3A4A3A3A3A4A4A3A4A4A4A5A78592A39F84A0A7A5A4A4A2A1A0A0A1A1A29F9EA3A3A3A4A3A5A5A4A4A4A4A4A59BA2A5AA8A9AA7A4A4A5A4A2A1A1A1A1A2A19FA4A4A4A4A4A4A5A4A4A3A3A2A3A4A4A4967CA4A5A3A2A4A4A1A1A1A1A0A1A09FA3A5A6A4A4A4A5A3A3A3A4A2A4A3A3A49198A7A4A3A2A3A3A1A1A1A0A0A1A09FA4A4A5A5A5A4A3A3A3A1A3A2A3A3A3A3A6A4A4A4A4A2A3A2A19FA0A0A0A0A09FA5A4A5A3A4A5A4A3A2A2A4A2A1A3A2A2A2A2A3A2A4A2A1A1A09F9F9E9E9F9E9E
`define C1_FILTER_DATA 200'h01000000000001000000000001000000000001000000000001
`define C3_FILTER_DATA 400'h0001000000000000000000000001000000000000000000000001000000000000000000000001000000000000000000000001
`define C5_WEIGHT_DATA 8000'h00000000000000010000000100000001000000000000000000000001000000000000000100000000000000000000000100000000000000010000000000000000000000010000000000000001000000000000000000000001000000010000000100000000000000000000000000000001000000000000000000000000000000000000000100000000000000000000000000000000000000010000000000000000000000000000000000000001000000000000000000000000000000000000000100000000000000000000000000000000000000010000000000000000000000000000000100000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000000000000100000001000000010000000000000000000000010000000100000001000000000000000000000000000000000000000100000000000000000000000100000001000000010000000000000000000000000000000000000001000000000000000000000001000000010000000100000000000000000000000100000000000000010000000000000000000000010000000000000001000000000000000000000001000000010000000100000000000000000000000000000000000000010000000000000000000000000000000000000001000000000000000000000001000000010000000100000000000000000000000100000000000000000000000000000000000000010000000100000001000000000000000000000000000000000000000100000000000000000000000100000001000000010000000000000000000000010000000100000001000000000000000000000001000000000000000000000000000000000000000100000001000000010000000000000000000000010000000000000001000000000000000000000001000000010000000100000000000000000000000100000001000000010000000000000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000000000001000000000000000000000000000000000000000100000000000000000000000000000001000000010000000100000000000000000000000100000000000000010000000000000000000000010000000100000001000000000000000000000001000000000000000100000000000000000000000100000001000000010000000000000000000000010000000100000001000000000000000000000001000000000000000100000000000000000000000100000001000000010000000000000000000000000000000000000001000000000000000000000000000000000000000100000000
